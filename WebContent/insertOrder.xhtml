<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="templates/main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:b="http://bootsfaces.net/ui">
    <ui:define name="title">Insert Order</ui:define>

    <ui:define name="content">
        <b:container>

                <f:view>
                    <h:form>
                        <h:dataTable styleClass="table table-striped" value="#{customer.currentOrder.items}" var="ol">
                            <h:column>
                                <f:facet name="header"><h:outputText value="Product"/></f:facet>
                                <h:graphicImage name="#{config.getImagePath(ol.product.code)}" styleClass="prod-img prod-img-xs"/>
                            </h:column>
                            <h:column>
                                <h:outputText value="#{ol.product.name}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header"><h:outputText value="Price"/></f:facet>
                                <h:outputText value="#{config.getPrice(ol.unitPrice)}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header"><h:outputText value="Quantity"/></f:facet>
                                <h:outputText value="#{ol.quantity}"/>
                            </h:column>
                            <h:column>
                                <f:facet name="header"><h:outputText value="Subtotal"/></f:facet>
                                <h:outputText value="#{config.getPrice(ol.subTotal)}"/>
                            </h:column>
                        </h:dataTable>

                    </h:form>
                </f:view>
                <hr/>

                <hr/>
                <b>Total before taxes:</b> #{customer.currentOrder.total}
                <br/>
                <b>Taxes:</b> #{config.getTaxes(customer.currentOrder.total)}
                <br/>
                <h2><b>Total:</b> #{config.getPrice(customer.currentOrder.total)}</h2>
            <f:view>
                <h:form>
                    Add another item:
                    <b:inputText label="Product Code"
                                 value="#{customer.productCode}"
                                 required="true"
                                 requiredMessage="Code is mandatory"
                            />
                    <b:inputText label="Quantity" value="#{customer.quantity}"/>
                    <b:commandButton value="Add" action="#{customer.addToOrder()}"/>

                    <br/>
                    <br/>
                    <h:commandButton value="Place Order" action="#{customer.closeOrder}"
                                     class="btn btn-default"/>

                    <h:commandButton value="Save for later" action="#{customer.closeOrder}"
                                     class="btn btn-default"/>
                </h:form>
            </f:view>
        </b:container>
    </ui:define>
</ui:composition>