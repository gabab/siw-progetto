<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="templates/main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:b="http://bootsfaces.net/ui">
    <f:metadata>
        <f:event type="preRenderView" listener="#{login.checkIsLoggedIn}"/>
    </f:metadata>
    <ui:define name="title">Registration</ui:define>
    <ui:define name="content">

        <b:container>
            <b:row>
                <b:column col-sm="6" col-md="6" offset="3">
                    <b:alert severity="danger"
                             closable="true"
                             rendered="#{not empty facesContext.messageList}">
                        There where errors:<br/>
                        <h:messages/>
                    </b:alert>
                    <f:view><h:form>
                        <b:panel title="Registration">
                            Insert your data here. All fields are mandatory.
                            <fieldset>
                                <label>Name:
                                    <b:inputText value="#{registration.name}"
                                                 required="true"
                                                 requiredMessage="Name is mandatory"
                                                 validatorMessage="Name 3 character minimum"
                                                 id="name">
                                        <f:validateLength minimum="3"/>
                                        <f:facet name="prepend">
                                            <b:icon name="user"/>
                                        </f:facet>
                                    </b:inputText>
                                </label>
                                <label>Surname:
                                    <b:inputText value="#{registration.surname}"
                                                 required="true"
                                                 requiredMessage="Surname is mandatory"
                                                 validatorMessage="Surname 3 character minimum"
                                                 id="surname">
                                        <f:validateLength minimum="3"/>
                                        <f:facet name="prepend">
                                            <b:icon name="user"/>
                                        </f:facet>
                                    </b:inputText>
                                </label>
                                <label>Date of Birth:
                                    <b:inputText value="#{registration.birthDate}"
                                                 required="true"
                                                 requiredMessage="Date is mandatory" id="birthdate"
                                                 converterMessage="Date must be DD-MM-YYYY">
                                        <f:convertDateTime pattern="dd-M-yyyy"/>
                                        <f:facet name="prepend">
                                            <b:icon name="calendar"/>
                                        </f:facet>
                                    </b:inputText>
                                </label>
                                <label>Email:
                                    <b:inputText value="#{registration.email}"
                                                 required="true"
                                                 requiredMessage="Email is mandatory" id="email"
                                                 validator="EmailValidator">
                                        <f:facet name="prepend">
                                            <b:icon name="envelope"/>
                                        </f:facet>
                                    </b:inputText>
                                </label>
                                <label>Password:
                                    <b:inputSecret value="#{registration.password}"
                                                   id="password"
                                                   required="true"
                                                   requiredMessage="Password is mandatory">
                                        <f:validateLength minimum="6"/>
                                        <f:facet name="prepend">
                                            <b:iconAwesome name="key"/>
                                        </f:facet>
                                    </b:inputSecret>
                                </label>
                                <b:commandButton look="primary" value="Register"
                                                 action="#{registration.requestRegistration}" size="lg"/>
                            </fieldset>
                        </b:panel>
                    </h:form></f:view>
                </b:column>
            </b:row>
        </b:container>
    </ui:define>

</ui:composition>