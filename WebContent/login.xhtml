<?xml version="1.0" encoding="UTF-8"?>
<ui:composition template="templates/main.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:b="http://bootsfaces.net/ui">
    <f:metadata>
        <f:event type="preRenderView" listener="#{login.checkIsLoggedIn}"/>
    </f:metadata>
    <ui:define name="title">Login</ui:define>

    <ui:define name="content">

        <b:container>
            <b:row>
                <b:column col-md="4" offset="4">
                    <f:view><h:form>
                        <b:panel title="Please Sign In">
                            <fieldset>

                                <b:inputText autofocus="true" placeholder="E-mail" id="email"
                                             required="true"
                                             value="#{login.email}"
                                             requiredMessage="Email is required"/>

                                <b:inputSecret placeholder="Password" id="password"
                                               required="true"
                                               value="#{login.password}"
                                               requiredMessage="Password is required"/>

                                <b:commandButton value="Login" action="#{login.login}"
                                                 look="success" size="lg" styleClass="btn-block"/>

                            </fieldset>
                        </b:panel>
                        <b:alert severity="danger"
                                 rendered="#{not empty facesContext.messageList or login.errorMessage != null}">
                            <h:message for="email"/>
                            <br/>
                            <h:message for="password"/>
                            <br/>#{login.errorMessage}
                        </b:alert>
                    </h:form>
                    </f:view>
                </b:column>
            </b:row>


        </b:container>

    </ui:define>
</ui:composition>
